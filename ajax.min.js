!function(t){"use strict";function n(t){return p(this,t),y(this,t),T(this),O(this),this}var e={URLENCODED:"application/x-www-form-urlencoded",JSON:"application/json"},r=function(){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}(),o=["GET","POST","PUT","HEAD","DELETE","OPTIONS","TRACE","CONNECT"],u=function(){var t=document.getElementsByName("csrf-token")[0];return"undefined"!=typeof t&&null!==t?t.content:null},i=function(){},a=function(t){return e[t.type]},s=function(){if(t.XMLHttpRequest)return["XMLHttpRequest",null];if(t.ActiveXObject){var n="ActiveXObject",e="";try{return e="Msxml2.XMLHTTP",t[n](e),[n,e]}catch(r){try{return e="Microsoft.XMLHTTP",t[n](e),[n,e]}catch(o){}}}throw new Error("Your browser is way too old.")}(),c=function(n){var e=new t[s[0]](s[1]);return e.open(n.method,n.url,!0),e.timeout=n.timeout,e},f=function(t,n){n.ontimeout=t.onTimeout(n),t.onStart(n),n.onreadystatechange=function(){4===this.readyState&&(200===this.status||201===this.status?t.onSuccess(this):t.onError(this),t.onFinish(this))}},h=function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e+"="+encodeURIComponent(t[e]));return n.join("&")},d=function(t){return"JSON"===t.type?JSON.stringify(t.data):h(t.data)},l=function(t,n){for(var e=t.headers,r=0;r<e.length;r++){var o=e[r];n.setRequestHeader(o.key,o.value)}},p=function(t,n){t.method=n.method||o[0],t.url=n.url,t.data=n.data||{},t.token=n.token||u(),t.timeout=n.timeout||0,t.type=n.type||r[0],t.headers=n.headers||[]},y=function(t,n){for(var e=["onSuccess","onError","onStart","onFinish","onTimeout"],r=0;r<e.length;r++){var o=e[r];t[o]=n[o]||i}},v=function(t){if("undefined"==typeof t)throw new Error("Ajax requires a url.")},m=function(t,n){for(var e=0;e<t.length;e++)if(t[e]===n)return!0;return!1},w=function(t){if(!m(o,t))throw new Error("Ajax method must be valid.")},E=function(t){if(!m(r,t))throw new Error("Ajax content type must be valid.")},T=function(t){v(t.url),w(t.method),E(t.type)},O=function(t){t.headers.push({key:"Content-Type",value:a(t)}),t.token&&t.headers.push({key:"X-CSRF-Token",value:t.token})};n.request=function(t){return new n(t).send()},n.prototype.send=function(){var t=c(this);return l(this,t),f(this,t),t.send(d(this)),this};var S=t.define||null;"function"==typeof S&&S.amd?S("ajax",[],function(){return n}):t.Ajax=n}(this);
